---
title: "Lab 3: Displaying data visualization on a website"
output: 
  html_document:
    toc: true
---

```{r setup, include=FALSE}
knitr::opts_knit$set(base.dir = "../docs/", root.dir = "../docs/")
knitr::opts_chunk$set(echo = TRUE, eval = FALSE)
```
<br>

### Goals for today

1. Continue to explore and practice graphing with ggplot
 
2. Continue to explore and practice website setup and styling with GitHub Pages

3. Integrate 1) and 2) to publish your data visualization on a website

<br>


<br>

### Exercise 1: Explore the `gapminder` dataset with ggplot (50 mins)

<br>

#### General instructions

Today, we'll use ggplot to visually explore global trends in public health and economics compiled by the [Gapminder project](https://www.gapminder.org/about/). This project was pioneered by [Hans Rosling](https://www.ted.com/speakers/hans_rosling), who is famous for describing the prosperity of nations over time through famines, wars and other historic events with this beautiful data visualization in his [2006 TED Talk: The best stats you've ever seen](https://www.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen): 

<br> 

[Gapminder Motion Chart](http://www.gapminder.org/world)  
[![Gapminder Motion Chart](https://github.com/remi-daigle/2016-04-15-UCSB/raw/gh-pages/viz/img/gapminder-world_motion-chart.png)](http://www.gapminder.org/world)  

<br>
<br>


#### Step 1: Get to now our data
Take a few minutes to explore the [Gapminder Foundation](https://www.gapminder.org/about/)

<br>
<br>

#### Step 2: Set up a GitHub-linked RStudio project to work in
Please create a new GitHub repo in your personal account named `gapminder`, clone the repo to your computer, and work on your data exploration in this new repo. 

Open an .Rmd template file (File -> New File -> R Markdown...). Delete the boilerplate text under the setup chunk (you can keep that chunk) and make three level 1 headers:
- Data
- Life expectancy
- Fertility
- Infant mortality

<br>

Under the **Data** header, add a short description of the dataset we're using today (you can copy that from our description above).

<br>
<br>

#### Step 3: Load the data
Today, will work with a subset of the `gapminder` dataset provided in the R package `dslabs`. 

Let's start by installing the `dslabs` package so we can access the data. After installing the package we need to load it with the `library()` function. We also need to load the `tidyverse` package because it contains ggplot.

```{r}

library(dslabs) #install.packages("dslabs")
library(tidyverse)

```

<br>

Let's start by exploring the data. You might e.g. want to use functions like `View()`, `dim()`, and `colnames()` `?`. You will see that the dataset includes the following variables:

- country
- year
- infant_mortality (infant deaths per 1000)
- life_expectancy
- fertility (average number of children per woman)
- population (per country)
- gpd (per country)
- continent
- region (geographical region)

<br>

The dataset includes data from 1960-2016. Since we're just getting started with ggplot, we'll only work with the 2011 data today (the most recent year for which the national GDPs are included in this dataset). Later in the course, we'll return to the full dataset.

To subset the data, copy and run the following code. We'll discuss data subsetting in class next week, so don't worry about the notation for now.

```{r}

gap2011 <- gapminder %>% 
  as_tibble() %>% 
  filter(year == 2011)

```

This creates the `gap2011` dataframe that you'll be working with for the rest of the day. Explore its dimensions and variables.

<br>
<br>

#### Step 4: Explore patterns in the data in breakout rooms

In breakout rooms, go and explore patterns in the data with ggplot.

First, under your **Life expectancy** header, add some text and code chunks to plot patterns in the `life_expectancy` variable.

Some ideas to explore:
- What is the distribution of values (show e.g. in a histogram, a density plot, or boxplot (or all three!)) and does that vary based on continent? 
- How does life expectancy relate to infant mortality rates, fertility, population size, or GDP? How many variables can you display on the same plot and is the most effective or visually appealing way to display the patterns?

You can look back to our [lecture 6 notes](https://nt246.github.io/NTRES-6100-data-science/lesson6-ggplot-part1.html#Arguments_and_functions_you_should_know) or the [RStudio ggplot cheatsheet](https://rstudio.com/wp-content/uploads/2016/11/ggplot2-cheatsheet-2.1.pdf) for inspiration.

<br>

After you've done some exploration of life expectancy, move on to add some plots and text under your **Fertility** header.

<br>

#### Breakout room information

For this exercise, we will create three types of breakout rooms: **interactive**, **quiet**, and **solitary**. 

  * For interactive rooms, participants are expected to have the camera and microphone on and troubleshoot as a group (although each person will be typing in their own document, you can share screen etc to work together). 
  * For quiet rooms, participants will work on their own, but can come up with questions for the group to discuss.   
  * For solitary rooms, participants are not expected to interact with each other at all, and will completely work on their own. 

You will be able to choose your own rooms, but let's limit the group size to 4, so pick a different room if one already has this many participants. 

<br>


## Recap (10 minutes)

Share your findings, challenges, and questions with the class. 

  
<br>

### Short break (10 minutes)

<br>

## Exercise 2: Publish your data visualizations on a website and explore different website styling options

<br>


**Before you start**, please create a new GitHub repo named `cv-yourname` (replace `yourname` with your name), clone the repo to your computer, and work on your CV in this new repo. If you already have a draft CV from Lab 1, feel free to copy this draft to your new repo.


#### General instructions

For this exercise, you will collaborate with a partner to peer review the CVs you just made. 

Add your partner as a collaborator for your CV repo. Then, clone your partner's repo to your computer using RStudio. 

<br>

#### Breakout room instructions

We will randomly assign pairs of students into breakout rooms. Please let us know in advance if you have a preferred partner for this exercise.

<br>

#### Suggested Activities

It is recommended that you go through your peer review process in the following steps. 

1. Use the intentional typos as an opportunity to practice how to resolve merge conflicts, and how to avoid them when possible. 
    a. First, both partners could correct a same typo in one partner's `Rmd` file in slightly different ways. **Do not knit the `Rmd` file yet.** Then, both partners can commit their changed `Rmd` file. One partner can push first, and the other partner will pull, and will get a merge conflict. They can then address this merge conflict, **knit**, push the resolved version to GitHub, and the other partner can pull. After this, partners can switch roles. 
    b. Then, partners can correct typos in different lines in one person's `Rmd` file. **Similarly, neither should knit at this point.** Again, they will both commit their changes, one partner will push first, and when the other pulls, the changes should be merged automatically. They can now knit, push, and the other partner can pull. 

2. In the previous step, we emphasized that neither partners should knit their changed `Rmd` file before pulling other's changes. This is because conflicted versions of `Rmd` files can usually be merged without too much of a hassle, but with the knitted `markdown`, `html`, or `pdf` files, you might get unwieldy merge conflicts because of different system configurations between partners. There is, however, a very simple fix to this: the partner who has received the unwieldy merge conflict could just **deleted the knitted output**, and **reknit** the `Rmd` file once merge conflicts (if any) are resolved. Now, try step 1a again, but both partners can knit this time. 

3. Use the GitHub's Issue feature to provide feedback to your partner on their CV. 

4. Create a GitHub Project under the CV repo, and assign the Issues to your partner as a "to-do" item in this project. 

5. Revise your CV according to the feedback from your partner, and respond and close the Issue when the feedback is resolved. 

6. If there is still some time left after you have finished all the steps above, you can either take more time to practice your collaboration skills, or start working on this week's assignment. 

<br>


<br>

**END LAB 1**

<div class="tocify-extend-page" data-unique="tocify-extend-page" style="height: 0;"></div>
